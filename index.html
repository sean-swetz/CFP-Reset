<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset 2026 Challenge Tracker</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/YOUR_FAVICON.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Mobile Hamburger Menu -->
<div class="hamburger-menu" id="hamburgerMenu" onclick="toggleMobileMenu()">
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
</div>

<div class="mobile-nav-overlay" id="mobileNavOverlay" onclick="toggleMobileMenu()"></div>

<div class="mobile-nav-menu" id="mobileNavMenu">
    <div class="mobile-nav-header">
        <h3>RESET 2026</h3>
        <p style="margin: 5px 0 0 0; font-size: 0.9em;">Navigation</p>
    </div>
    <div class="mobile-nav-links">
        <a class="mobile-nav-link active" onclick="mobileShowSection('checkin')">ğŸ“‹ Check In</a>
        <a class="mobile-nav-link" onclick="mobileShowSection('profile')">ğŸ‘¤ My Profile</a>
        <a class="mobile-nav-link" onclick="mobileShowSection('leaderboard')">ğŸ“Š The Whiteboard</a>
        <a class="mobile-nav-link" onclick="mobileShowSection('teams')">ğŸ‘¥ Teams</a>
        <a class="mobile-nav-link" onclick="mobileShowSection('locker')">ğŸ’¬ The Locker Room</a>
        <a class="mobile-nav-link admin" id="mobileAdminLink" onclick="mobileShowSection('admin')" style="display: none;">ğŸ”§ Admin</a>
        <a class="mobile-nav-link" onclick="logout()" style="color: #ff6b6b; margin-top: 20px;">ğŸšª Logout</a>
    </div>
</div>
    <div class="loading" id="loading">Loading Reset 2026...</div>
    
<!-- Notification Permission Banner -->
<div id="notificationBanner" style="display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #9BFB02 0%, #7dd102 100%); color: #000; padding: 20px 30px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.3); z-index: 1000; max-width: 90%; text-align: center;">
    <p style="margin: 0 0 15px 0; font-weight: 600; font-size: 1.1em;">ğŸ“¬ Get Check-In Reminders!</p>
    <p style="margin: 0 0 15px 0; font-size: 0.95em;">We'll send you a friendly reminder when it's time to check in each week.</p>
    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
        <button onclick="enableNotifications()" style="background: #000; color: #9BFB02; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 700; cursor: pointer;">
            âœ… Enable Notifications
        </button>
        <button onclick="dismissNotificationBanner()" style="background: transparent; border: 2px solid #000; color: #000; padding: 10px 20px; border-radius: 8px; font-weight: 700; cursor: pointer;">
            Maybe Later
        </button>
    </div>
</div>
    
    <!-- Authentication Page -->
    <div id="authPage" style="display: none;">
        <div class="login-container">
            <div class="header">
                <img src="CrossfitProsperity_Logo.png" alt="CrossFit Prosperity" class="header-logo">
                <h1>RESET 2026</h1>
                <p class="subtitle">Nutrition & Fitness Challenge</p>
            </div>

            <div class="card">
                <div class="auth-tabs">
                    <div class="auth-tab active" onclick="showAuthTab('login')">Login</div>
                    <div class="auth-tab" onclick="showAuthTab('register')">Register</div>
                </div>

                <div class="error-message" id="authError"></div>
                <div class="success-message" id="authSuccess"></div>

                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <h2>Welcome Back!</h2>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn" id="loginBtn">Login</button>
                    <div class="forgot-password">
                        <a href="#" onclick="showAuthTab('reset'); return false;">Forgot Password?</a>
                    </div>
                </form>

                <!-- Register Form -->
                <form id="registerForm" class="auth-form">
                    <h2>Join the Challenge</h2>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="regName" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="regEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPassword" required minlength="6">
                    </div>
                    <button type="submit" class="btn" id="registerBtn">Create Account</button>
                </form>

                <!-- Password Reset Form -->
                <form id="resetForm" class="auth-form">
                    <h2>Reset Password</h2>
                    <p style="color: #666; margin-bottom: 20px;">Enter your email address and we'll send you a link to reset your password.</p>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="resetEmail" required>
                    </div>
                    <button type="submit" class="btn" id="resetBtn">Send Reset Link</button>
                    <div class="forgot-password">
                        <a href="#" onclick="showAuthTab('login'); return false;">Back to Login</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="container" style="display: none;">
        <div class="header">
            <img src="CrossfitProsperity_Logo.png" alt="CrossFit Prosperity" class="header-logo">
            <h1>RESET 2026</h1>
            <p class="subtitle">Nutrition & Fitness Challenge Tracker</p>
        </div>

        <div class="logged-in-user">
            <span id="userGreeting">Welcome!</span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('checkin')">Check In</button>
            <button class="nav-btn" onclick="showSection('profile')">My Profile</button>
            <button class="nav-btn" onclick="showSection('leaderboard')">The Whiteboard</button>
            <button class="nav-btn" onclick="showSection('teams')">Teams</button>
            <button class="nav-btn" onclick="showSection('locker')">The Locker Room</button>
            <button class="nav-btn admin" id="adminNavBtn" onclick="showSection('admin')" style="display: none;">Admin</button>
        </div>

        <!-- Check In Section -->
        <div id="checkin" class="section active">
            <div class="card">
                <h2>Weekly Check-In</h2>
                
                <div id="checkinWindowBanner"></div>
                
                <div class="success-message" id="checkinSuccess"></div>
                <form id="checkinForm">
                  <div id="dynamicCriteria">
    <p style="text-align: center; padding: 30px;">Loading criteria...</p>
</div>

<div class="total-score" id="totalScore">
    Total Weekly Score: 0 points
</div>

<button type="submit" class="btn" id="checkinBtn">Submit Check-In</button>
                </form>
            </div>
        </div>

<!-- Challenge Info Section -->
<div id="challengeInfo" class="section">
    <div class="card">
        <h2>ğŸ“‹ Challenge Information</h2>
        <p style="color: #666; font-size: 1.1em; margin-bottom: 30px;">
            Everything you need to know about the Reset 2026 Challenge! Use this guide to make informed choices throughout the week.
        </p>

        <!-- Overview -->
        <div class="info-section">
            <h3 class="info-heading">ğŸ¯ Challenge Overview</h3>
            <div class="info-content">
                <p>The Reset 2026 Challenge is a 6-week journey to build sustainable health habits. Track your protein, hydration, veggies, and workouts to earn points and compete with your team!</p>
                <p><strong>Duration:</strong> 6 weeks starting January 6, 2026</p>
                <p><strong>Goal:</strong> Consistency over perfection. Build habits that last beyond the challenge!</p>
            </div>
        </div>

        <!-- Good Foods -->
        <div class="info-section">
            <h3 class="info-heading">âœ… Good Foods</h3>
            <div class="info-content">
                <p><strong>Lean Proteins:</strong> Chicken breast, turkey, fish, lean beef, eggs, Greek yogurt, cottage cheese</p>
                <p><strong>Healthy Fats:</strong> Avocado, nuts, seeds, olive oil, fatty fish (salmon, mackerel)</p>
                <p><strong>Complex Carbs:</strong> Sweet potatoes, quinoa, brown rice, oats, whole grain bread</p>
                <p><strong>Vegetables:</strong> Leafy greens, broccoli, bell peppers, carrots, zucchini, cauliflower</p>
                <p><strong>Fruits:</strong> Berries, apples, bananas, oranges, melons</p>
            </div>
        </div>

        <!-- Restricted Foods -->
        <div class="info-section restricted">
            <h3 class="info-heading">ğŸš« Restricted Foods</h3>
            <div class="info-content">
                <p><strong>Added Sugars:</strong> Candy, soda, sugary cereals, pastries, cookies</p>
                <p><strong>Processed Foods:</strong> Fast food, frozen meals, packaged snacks, chips</p>
                <p><strong>Refined Grains:</strong> White bread, white pasta, white rice</p>
                <p><strong>Alcohol:</strong> Beer, wine, spirits (may result in point deductions - check criteria)</p>
                <p><strong>Fried Foods:</strong> French fries, fried chicken, onion rings</p>
            </div>
        </div>

        <!-- Protein Sources -->
        <div class="info-section">
            <h3 class="info-heading">ğŸ¥© Protein Sources</h3>
            <div class="info-content">
                <div class="food-grid">
                    <div class="food-item">
                        <strong>Chicken Breast</strong>
                        <span>31g per 4oz</span>
                    </div>
                    <div class="food-item">
                        <strong>Ground Turkey</strong>
                        <span>28g per 4oz</span>
                    </div>
                    <div class="food-item">
                        <strong>Salmon</strong>
                        <span>25g per 4oz</span>
                    </div>
                    <div class="food-item">
                        <strong>Eggs</strong>
                        <span>6g per egg</span>
                    </div>
                    <div class="food-item">
                        <strong>Greek Yogurt</strong>
                        <span>15-20g per cup</span>
                    </div>
                    <div class="food-item">
                        <strong>Protein Powder</strong>
                        <span>20-25g per scoop</span>
                    </div>
                    <div class="food-item">
                        <strong>Cottage Cheese</strong>
                        <span>14g per 1/2 cup</span>
                    </div>
                    <div class="food-item">
                        <strong>Lean Beef</strong>
                        <span>26g per 4oz</span>
                    </div>
                </div>
                <p style="margin-top: 15px; font-style: italic; color: #666;">
                    <strong>Daily Goal:</strong> Aim for 0.8-1g of protein per pound of body weight. Track it daily!
                </p>
            </div>
        </div>

        <!-- Veggie Guide -->
        <div class="info-section">
            <h3 class="info-heading">ğŸ¥— Veggie Guide</h3>
            <div class="info-content">
                <p><strong>Leafy Greens:</strong> Spinach, kale, arugula, romaine, Swiss chard</p>
                <p><strong>Cruciferous:</strong> Broccoli, cauliflower, Brussels sprouts, cabbage</p>
                <p><strong>Colorful Veggies:</strong> Bell peppers, carrots, tomatoes, beets, squash</p>
                <p><strong>Quick Tips:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Aim for at least 3-5 servings per day</li>
                    <li>Mix colors for maximum nutrients</li>
                    <li>Fresh, frozen, or roasted all count!</li>
                    <li>Add veggies to every meal when possible</li>
                </ul>
            </div>
        </div>

        <!-- Carb Sources -->
        <div class="info-section">
            <h3 class="info-heading">ğŸ  Healthy Carb Sources</h3>
            <div class="info-content">
                <p><strong>Whole Grains:</strong> Brown rice, quinoa, oats, whole wheat pasta, farro</p>
                <p><strong>Starchy Vegetables:</strong> Sweet potatoes, white potatoes, butternut squash</p>
                <p><strong>Legumes:</strong> Lentils, chickpeas, black beans, kidney beans</p>
                <p><strong>Fruits:</strong> Bananas, berries, apples, oranges</p>
                <p style="margin-top: 15px; font-style: italic; color: #666;">
                    <strong>Tip:</strong> Pair carbs with protein and healthy fats for sustained energy!
                </p>
            </div>
        </div>

        <!-- Hydration -->
        <div class="info-section">
            <h3 class="info-heading">ğŸ’§ Hydration Tips</h3>
            <div class="info-content">
                <p><strong>Daily Goal:</strong> Half your body weight in ounces (e.g., 150 lbs = 75 oz water)</p>
                <p><strong>Tips for Success:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Start your day with 16oz of water</li>
                    <li>Drink water before, during, and after workouts</li>
                    <li>Keep a water bottle with you at all times</li>
                    <li>Add lemon, cucumber, or fruit for flavor</li>
                    <li>Track your intake with an app or water bottle markers</li>
                </ul>
                <p style="margin-top: 15px;"><strong>What Counts:</strong> Water, sparkling water, herbal tea</p>
                <p><strong>What Doesn't Count:</strong> Soda, juice, coffee, energy drinks</p>
            </div>
        </div>

        <!-- FAQs -->
        <div class="info-section">
            <h3 class="info-heading">â“ Frequently Asked Questions</h3>
            <div class="info-content">
                <div class="faq-item">
                    <strong>Q: What if I miss a day?</strong>
                    <p>Don't stress! Jump back in the next day. Consistency over perfection wins the challenge.</p>
                </div>
                <div class="faq-item">
                    <strong>Q: Can I meal prep?</strong>
                    <p>Absolutely! Meal prep is one of the best strategies for staying on track during busy weeks.</p>
                </div>
                <div class="faq-item">
                    <strong>Q: Do cheat meals affect my score?</strong>
                    <p>Check the current week's criteria! Some weeks may have flexibility, others may have deductions.</p>
                </div>
                <div class="faq-item">
                    <strong>Q: How do I track my protein?</strong>
                    <p>Use apps like MyFitnessPal, read nutrition labels, or use the protein guide above for estimates.</p>
                </div>
                <div class="faq-item">
                    <strong>Q: What if I'm vegetarian/vegan?</strong>
                    <p>Focus on plant proteins: tofu, tempeh, legumes, quinoa, protein powder, nuts, and seeds!</p>
                </div>
            </div>
        </div>

        <!-- Admin Edit Button -->
        <div id="editChallengeInfoBtn" style="display: none; margin-top: 30px;">
            <button onclick="alert('Challenge info editing coming soon!')" class="btn btn-secondary">
                âœï¸ Edit Challenge Info (Admin)
            </button>
        </div>
    </div>
</div>

        <!-- My Profile Section -->
        <div id="profile" class="section">
            <div class="card">
                <h2>ğŸ‘¤ My Profile</h2>
                
                <div class="profile-container">
                    <img id="profilePhotoDisplay" class="profile-photo large" 
                         src="https://ui-avatars.com/api/?name=User&background=9BFB02&color=000&size=120" 
                         alt="Profile Photo">
                    <div>
                        <input type="file" id="photoUpload" accept="image/*" style="display: none;" onchange="uploadProfilePhoto()">
                        <button class="photo-upload-btn" onclick="document.getElementById('photoUpload').click()">
                            ğŸ“· Upload Photo
                        </button>
                        <p style="color: #666; font-size: 0.9em; margin-top: 10px;">Max 5MB â€¢ JPG, PNG, or GIF â€¢ Large images auto-compressed</p>
                    </div>
                </div>

                <div class="profile-info-grid">
                    <div class="profile-info-item">
                        <label>Nickname</label>
                        <input type="text" class="profile-edit-input" id="profileNickname" 
                               placeholder="Your nickname" maxlength="30">
                    </div>
                    <div class="profile-info-item">
                        <label>Favorite CrossFit Movement</label>
                        <input type="text" class="profile-edit-input" id="profileMovement" 
                               placeholder="e.g., Deadlift, Box Jumps" maxlength="50">
                    </div>
                    <div class="profile-info-item">
                        <label>Favorite Veggie</label>
                        <input type="text" class="profile-edit-input" id="profileVeggie" 
                               placeholder="e.g., Broccoli, Carrots" maxlength="50">
                    </div>
                    <div class="profile-info-item">
                        <label>#1 Goal This Challenge</label>
                        <input type="text" class="profile-edit-input" id="profileGoal" 
                               placeholder="e.g., Lose 10lbs, PR my deadlift" maxlength="100">
                    </div>
                </div>

                <button class="btn" onclick="saveProfile()" style="margin-top: 30px;">
                    ğŸ’¾ Save Profile
                </button>
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h3 style="margin-bottom: 15px;">ğŸ”” Notification Settings</h3>
    <p style="color: #666; margin-bottom: 15px;">
        Get browser notifications to remind you to check in each week.
    </p>
    <div id="notificationStatus"></div>
    <button class="btn btn-secondary" onclick="manageNotifications()" id="notificationBtn" style="margin-top: 10px;">
        ğŸ”” Enable Notifications
    </button>
</div>
            </div>
        </div>

        <!-- Leaderboard Section -->
        <div id="leaderboard" class="section">
            <div class="card">
                <h2>ğŸ“Š The Whiteboard</h2>
                
                <div id="teamStandings" style="margin-bottom: 30px;">
                    <h3 style="color: #3146E7; margin-bottom: 15px;">Team Standings</h3>
                    <div class="team-leaderboard" id="teamLeaderboard"></div>
                </div>
                <div style="margin-bottom: 20px;">
    <input type="text" id="leaderboardSearch" placeholder="ğŸ” Search by name..." 
           style="width: 100%; max-width: 400px; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em;"
           oninput="searchLeaderboard(this.value)">
</div>
                <h3 style="color: #3146E7; margin-bottom: 15px;">Individual Rankings</h3>
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Name</th>
                            <th>Team</th>
                            <th>Total Points</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <tr><td colspan="4" style="text-align: center; padding: 30px;">Loading...</td></tr>
                    </tbody>
                </table>
                <div id="leaderboardPagination" style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 20px;">
    <button class="btn btn-secondary" onclick="changePage(-1)" id="prevBtn" style="padding: 10px 20px;">
        â† Previous
    </button>
    <span id="pageInfo" style="font-weight: 600; color: #666;">Page 1</span>
    <button class="btn btn-secondary" onclick="changePage(1)" id="nextBtn" style="padding: 10px 20px;">
        Next â†’
    </button>
</div>
                <div id="leaderboardMobile" class="leaderboard-mobile"></div>
            </div>
        </div>


        <!-- Teams Page -->
        <div id="teams" class="section">
            <div class="card">
                <h2>ğŸ‘¥ Team Rosters</h2>
                <p style="color: #666; margin-bottom: 30px;">View all team members, captains, and individual scores</p>
                <div id="teamsContent">
                    <p style="text-align: center; padding: 30px;">Loading teams...</p>
                </div>
            </div>
        </div>

        <!-- The Locker Room -->
        <div id="locker" class="section">
            <div class="card">
                <h2>ğŸ’¬ The Locker Room</h2>
                <p style="color: #666; margin-bottom: 20px;">Share PRs, wins, and talk with your teammates!</p>

                <div class="locker-room-challenge" id="weeklyChallenge">
                    <h3>ğŸ¯ This Week's Challenge</h3>
                    <div class="challenge-text" id="challengeText">
                        Loading challenge...
                    </div>
                    <button class="edit-challenge-btn" id="editChallengeBtn" style="display: none;" onclick="editChallenge()">
                        âœï¸ Edit Challenge
                    </button>
                </div>

                <h3 style="margin-bottom: 15px;">ğŸ“¢ Message Board</h3>
                <div class="messages-container" id="messagesContainer">
                    <p style="text-align: center; padding: 30px; color: #999;">Loading messages...</p>
                </div>
           <div class="message-input">
    <textarea 
        id="messageInput" 
        placeholder="Share a PR, celebrate a win, or talk some friendly trash... ğŸ’ª" 
        maxlength="500"
        rows="3"
    ></textarea>
    <div class="message-input-footer">
        <div class="char-counter" id="charCounter">0 / 500</div>
        <div class="message-buttons">
            <button onclick="openGiphyModal('main')" class="btn btn-secondary">
                ğŸ¬ GIF
            </button>
            <button onclick="postMessage()" id="postMessageBtn" class="btn">
                ğŸ“¤ Post Message
            </button>
        </div>
    </div>
</div>
                <!-- Team Chat Section -->
                <div style="margin-top: 50px; padding-top: 30px; border-top: 3px solid #9BFB02;">
                    <h2 style="color: #9BFB02; margin-bottom: 20px;">ğŸ† Team Channels</h2>
                    <p style="color: #666; margin-bottom: 20px;">Private chat with your teammates for strategy, motivation, and friendly competition!</p>
                    
                    <div style="margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">Select Your Team Channel</h3>
                        <div id="teamChannelSelector" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                            <button class="team-channel-btn team-red" onclick="switchTeamChannel('red')" style="display: none;">
                                ğŸ”´ Red
                            </button>
                            <button class="team-channel-btn team-blue" onclick="switchTeamChannel('blue')" style="display: none;">
                                ğŸ”µ Blue
                            </button>
                            <button class="team-channel-btn team-green" onclick="switchTeamChannel('green')" style="display: none;">
                                ğŸŸ¢ Green
                            </button>
                            <button class="team-channel-btn team-yellow" onclick="switchTeamChannel('yellow')" style="display: none;">
                                ğŸŸ¡ Yellow
                            </button>
                            <button class="team-channel-btn team-purple" onclick="switchTeamChannel('purple')" style="display: none;">
                                ğŸŸ£ Purple
                            </button>
                            <button class="team-channel-btn team-orange" onclick="switchTeamChannel('orange')" style="display: none;">
                                ğŸŸ  Orange
                            </button>
                            <button class="team-channel-btn team-pink" onclick="switchTeamChannel('pink')" style="display: none;">
                                ğŸ©· Pink
                            </button>
                            <button class="team-channel-btn team-teal" onclick="switchTeamChannel('teal')" style="display: none;">
                                ğŸ©µ Teal
                            </button>
                        </div>
                        <p id="currentChannelName" style="margin-top: 10px; color: #666; font-weight: 600;"></p>
                    </div>

                    <h3 style="margin-bottom: 15px;">ğŸ“¢ Team Messages</h3>
                    <div class="messages-container" id="teamMessagesContainer">
                        <p style="text-align: center; padding: 30px; color: #999;">Select your team channel above to view messages</p>
                    </div>

                <div id="teamMessageInput" class="message-input" style="display: none;">
    <textarea 
        id="teamMessageText" 
        placeholder="Message your team... ğŸ’ª" 
        maxlength="500"
        rows="3"
    ></textarea>
    <div class="message-input-footer">
        <div class="char-counter" id="teamCharCounter">0 / 500</div>
        <div class="message-buttons">
            <button onclick="openGiphyModal('team')" class="btn btn-secondary">
                ğŸ¬ GIF
            </button>
            <button onclick="postTeamMessage()" id="postTeamMessageBtn" class="btn">
                ğŸ“¤ Post to Team
            </button>
        </div>
    </div>
</div>
                </div>
            </div>
        </div>

        <!-- Admin Section -->
        <div id="admin" class="section">
            <div class="card">
                <h2>ğŸ”§ Admin Dashboard</h2>
                <div class="info-message">
                    <strong>Admin Access:</strong> You can export data and manage user visibility on the leaderboard.
                </div>

                <div class="admin-controls">
                    <div class="admin-card">
                        <h3>Total Users</h3>
                        <div class="stat" id="totalUsers">0</div>
                    </div>
                    <div class="admin-card">
                        <h3>Total Check-ins</h3>
                        <div class="stat" id="totalCheckins">0</div>
                    </div>
                    <div class="admin-card">
                        <h3>Visible Users</h3>
                        <div class="stat" id="visibleUsers">0</div>
                    </div>
                </div>

                <div class="window-control">
                    <h3 style="margin-bottom: 15px;">â° Check-In Window Control</h3>
                    <p style="color: #666; margin-bottom: 15px;">
                        Control when members can submit their weekly check-ins.
                    </p>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <span style="font-weight: 600;">Current Status:</span>
                        <span class="window-status" id="windowStatus">Loading...</span>
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="window.toggleCheckinWindow(true)" style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #9BFB02 0%, #7dd102 100%); color: #000;">
                            âœ… Open Check-Ins
                        </button>
                        <button class="btn btn-danger" onclick="window.toggleCheckinWindow(false)" style="flex: 1; min-width: 150px;">
                            ğŸš« Close Check-Ins
                        </button>
                    </div>
                </div>

                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h3 style="margin-bottom: 15px;">ğŸ† Weekly Winners Announcement</h3>
    <p style="color: #666; margin-bottom: 15px;">
        Post the week's top performers to the Locker Room. This will announce:
    </p>
    <ul style="color: #666; margin-bottom: 20px; padding-left: 20px;">
        <li>Top individual scorer</li>
        <li>Winning team</li>
        <li>Most improved player (biggest week-over-week gain)</li>
    </ul>
    <button class="btn" onclick="announceWeeklyWinners()" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #000;">
        ğŸ‰ Announce Weekly Winners
    </button>
</div>

                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h3 style="margin-bottom: 15px;">ğŸ”” Send Check-In Reminder</h3>
    <p style="color: #666; margin-bottom: 15px;">
        Send a browser notification to all users who have enabled notifications.
    </p>
    <button class="btn btn-secondary" onclick="sendCheckInReminder()">
        ğŸ“¢ Send Reminder to All
    </button>
</div>
                <div class="point-adjustment-section">
                    <h3 style="margin-bottom: 15px;">ğŸ”§ Manual Point Adjustment</h3>
                    <p style="color: #666; margin-bottom: 15px;">Add or subtract points with a reason</p>
                    
                    <div class="adjustment-form">
                        <select id="adjustmentUser" class="adjustment-input">
                            <option value="">Select User...</option>
                        </select>
                        <input type="number" id="adjustmentPoints" class="adjustment-input" 
                               placeholder="Points (+10 or -5)" step="1">
                        <input type="text" id="adjustmentReason" class="adjustment-input" 
                               placeholder="Reason (e.g., Forgot Monday protein)" 
                               style="grid-column: 1 / -1;">
                    </div>
                    
                    <button class="btn btn-secondary" onclick="applyPointAdjustment()">
                        âœ… Apply Adjustment
                    </button>

                    <div class="adjustment-history" id="adjustmentHistory">
                        <h4 style="margin-bottom: 10px;">Recent Adjustments</h4>
                        <p style="color: #999; text-align: center; padding: 20px;">No adjustments yet</p>
                    </div>
                </div>

                <div class="export-section">
                    <h3>Export Data</h3>
                    <p style="margin-bottom: 15px; color: #666;">Download all user and check-in data as CSV files.</p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="exportUsersCSV()" style="flex: 1; min-width: 200px;">
                            ğŸ“Š Export All Users
                        </button>
                        <button class="btn btn-secondary" onclick="exportCheckinsCSV()" style="flex: 1; min-width: 200px;">
                            ğŸ“‹ Export All Check-ins
                        </button>
                    </div>
                </div>
<div style="margin-top: 30px;">
    <h3>ğŸ“ Manage Check-In Criteria</h3>
    <p style="margin-bottom: 15px; color: #666;">Add, edit, or remove criteria that members check in for each week.</p>
    
    <button class="btn" onclick="addNewCriteria()" style="margin-bottom: 20px;">
        â• Add New Criteria
    </button>
    
    <div id="criteriaList" style="margin-top: 20px;">
        <p style="text-align: center; padding: 20px;">Loading criteria...</p>
    </div>
</div>
                <div style="margin-top: 30px;">
                    <h3>Customize Team Names</h3>
                    <p style="margin-bottom: 15px; color: #666;">Give each team a custom name while keeping their colors!</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-bottom: 30px;">
                        <div style="background: #ff6b6b; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸ”´ Red Team</strong>
                            <input type="text" class="team-name-input" id="teamName_red" placeholder="e.g., Red Warriors" 
                                   onblur="window.updateTeamName('red', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                        <div style="background: #3146E7; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸ”µ Blue Team</strong>
                            <input type="text" class="team-name-input" id="teamName_blue" placeholder="e.g., Blue Legends" 
                                   onblur="window.updateTeamName('blue', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                        <div style="background: #9BFB02; padding: 15px; border-radius: 10px; color: #000;">
                            <strong>ğŸŸ¢ Green Team</strong>
                            <input type="text" class="team-name-input" id="teamName_green" placeholder="e.g., Green Machines" 
                                   onblur="window.updateTeamName('green', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}"
                                   style="color: #000; background: rgba(255,255,255,0.8);">
                        </div>
                        <div style="background: #ffd93d; padding: 15px; border-radius: 10px; color: #333;">
                            <strong>ğŸŸ¡ Yellow Team</strong>
                            <input type="text" class="team-name-input" id="teamName_yellow" placeholder="e.g., Yellow Thunder" 
                                   onblur="window.updateTeamName('yellow', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}" 
                                   style="color: #333; background: rgba(255,255,255,0.8);">
                        </div>
                        <div style="background: #a55eea; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸŸ£ Purple Team</strong>
                            <input type="text" class="team-name-input" id="teamName_purple" placeholder="e.g., Purple Reign" 
                                   onblur="window.updateTeamName('purple', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                        <div style="background: #ff9f43; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸŸ  Orange Team</strong>
                            <input type="text" class="team-name-input" id="teamName_orange" placeholder="e.g., Orange Crush" 
                                   onblur="window.updateTeamName('orange', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                        <div style="background: #fd79a8; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸ©· Pink Team</strong>
                            <input type="text" class="team-name-input" id="teamName_pink" placeholder="e.g., Pink Panthers" 
                                   onblur="window.updateTeamName('pink', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                        <div style="background: #00d2d3; padding: 15px; border-radius: 10px; color: white;">
                            <strong>ğŸ©µ Teal Team</strong>
                            <input type="text" class="team-name-input" id="teamName_teal" placeholder="e.g., Teal Titans" 
                                   onblur="window.updateTeamName('teal', this.value)"
                                   onkeypress="if(event.key==='Enter'){event.preventDefault();this.blur();}">
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h3>Manage User Teams & Visibility</h3>
                    <p style="margin-bottom: 15px; color: #666;">Assign users to teams and control leaderboard visibility.</p>
                    <div class="user-list" id="adminUserList">
                        <p style="text-align: center; padding: 20px;">Loading users...</p>
                    </div>
                </div>

                <div class="export-section" style="margin-top: 30px;">
                    <h3>Export by Team</h3>
                    <p style="margin-bottom: 15px; color: #666;">Download user and check-in data filtered by team.</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                        <button class="btn btn-secondary" onclick="exportTeamData('red')" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);">
                            ğŸ“Š Red Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('blue')" style="background: linear-gradient(135deg, #3146E7 0%, #2236c7 100%);">
                            ğŸ“Š Blue Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('green')" style="background: linear-gradient(135deg, #9BFB02 0%, #7dd102 100%); color: #000;">
                            ğŸ“Š Green Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('yellow')" style="background: linear-gradient(135deg, #ffd93d 0%, #f5c542 100%); color: #333;">
                            ğŸ“Š Yellow Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('purple')" style="background: linear-gradient(135deg, #a55eea 0%, #8854d0 100%);">
                            ğŸ“Š Purple Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('orange')" style="background: linear-gradient(135deg, #ff9f43 0%, #ee8f34 100%);">
                            ğŸ“Š Orange Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('pink')" style="background: linear-gradient(135deg, #fd79a8 0%, #e66992 100%);">
                            ğŸ“Š Pink Team
                        </button>
                        <button class="btn btn-secondary" onclick="exportTeamData('teal')" style="background: linear-gradient(135deg, #00d2d3 0%, #00b4b5 100%);">
                            ğŸ“Š Teal Team
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeProfileModal()">&times;</span>
            <div id="profileModalContent"></div>
        </div>
    </div>

    <!-- Challenge Editor Modal -->
    <div id="challengeEditorModal" class="challenge-editor-modal">
        <div class="challenge-editor-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">âœï¸ Edit Weekly Challenge</h2>
                <span class="modal-close" onclick="closeChallengeEditor()">&times;</span>
            </div>

            <div class="editor-toolbar">
                <button class="editor-btn" onclick="insertText('**', '**')" title="Bold">
                    <strong>B</strong>
                </button>
                <button class="editor-btn" onclick="insertText('*', '*')" title="Italic">
                    <em>I</em>
                </button>
                <button class="editor-btn" onclick="insertText('â€¢ ', '')" title="Bullet Point">
                    â€¢ List
                </button>
                <button class="editor-btn" onclick="insertText('ğŸ’ª ', '')" title="Add Emoji">
                    ğŸ˜Š Emoji
                </button>
                <button class="editor-btn" onclick="insertText('\n---\n', '')" title="Divider">
                    â– Line
                </button>
            </div>

            <textarea id="challengeEditorText" class="challenge-editor-textarea" 
                      placeholder="Enter this week's challenge..."></textarea>

            <div class="editor-preview">
                <h3>Preview:</h3>
                <div id="challengePreview"></div>
            </div>

            <div class="editor-actions">
                <button class="btn" onclick="saveChallengeFromEditor()">
                    ğŸ’¾ Save Challenge
                </button>
                <button class="btn btn-secondary" onclick="closeChallengeEditor()" 
                        style="background: #999;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- External JavaScript -->
    <script type="module" src="app.js"></script>
    <!-- Giphy Search Modal -->
<div id="giphyModal" class="modal">
    <div class="modal-content giphy-modal-content">
        <div class="modal-header">
            <h2>Search GIFs</h2>
            <button class="close-btn" onclick="closeGiphyModal()">Ã—</button>
        </div>
        
        <div class="giphy-search-bar">
            <input 
                type="text" 
                id="giphySearchInput" 
                placeholder="Search for GIFs..." 
                class="giphy-search-input"
            >
            <button onclick="searchGiphy()" class="btn">ğŸ” Search</button>
        </div>
        
        <div id="giphyResults" class="giphy-results-grid">
            <!-- GIF results will be displayed here -->
        </div>
    </div>
</div>
</body>
</html>
